"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[708],{2461:function(e,l,r){r.r(l),r.d(l,{default:function(){return f}});var a=r(6252),o=r(3577);const s={class:"left-panel mx-10"},t=(0,a._)("div",{class:"card-header"},[(0,a._)("span",null,"选择采购需求文件")],-1),i=(0,a._)("div",{class:"card-header"},[(0,a._)("span",null,"预览")],-1),u=(0,a._)("span",null,"加载中...",-1);function d(e,l,r,d,c,p){const n=(0,a.up)("el-button"),m=(0,a.up)("el-header"),f=(0,a.up)("el-radio"),w=(0,a.up)("el-radio-group"),h=(0,a.up)("el-form-item"),_=(0,a.up)("el-form"),g=(0,a.up)("el-card"),v=(0,a.up)("el-col"),W=(0,a.up)("el-empty"),b=(0,a.up)("el-image"),k=(0,a.up)("el-row"),U=(0,a.up)("el-main"),y=(0,a.up)("el-container"),C=(0,a.up)("importDialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"header-tabs"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(n,{type:"primary",icon:"el-icon-upload",onClick:p.upload},{default:(0,a.w5)((()=>[(0,a.Uk)("上传采购需求文件")])),_:1},8,["onClick"])])])),_:1}),(0,a.Wm)(U,{class:"h-full"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{gutter:15},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{lg:10},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"h-full",shadow:"never"},{header:(0,a.w5)((()=>[t])),default:(0,a.w5)((()=>[(0,a.Wm)(_,{model:c.form,rules:c.rules,ref:"dataForm","label-width":"10px","label-position":"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"",prop:"purchase_docs"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:c.form.purchase_docs,"onUpdate:modelValue":l[0]||(l[0]=e=>c.form.purchase_docs=e),onChange:p.loadPreview},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.files,(e=>((0,a.wg)(),(0,a.j4)(f,{key:e,label:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1}),(0,a.Wm)(v,{lg:14},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"h-full",shadow:"never"},{header:(0,a.w5)((()=>[i])),default:(0,a.w5)((()=>[""==c.previewUrl?((0,a.wg)(),(0,a.j4)(W,{key:0,description:"无预览"})):(0,a.kq)("",!0),(0,a.Wm)(b,{src:c.previewUrl,"preview-src-list":[c.previewUrl],onError:p.imgerror},{placeholder:(0,a.w5)((()=>[u])),_:1},8,["src","preview-src-list","onError"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(C,{apiObj:e.uploadObj,ref:"importDialog",onSuccess:p.handleSuccess,title:"上传文件",tip:"最多上传1个文件,请上传docx格式文件",accept:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},null,8,["apiObj","onSuccess"])],64)}var c=r(8564),p={props:[],emits:[],data(){return{files:[],form:{purchase_docs:""},rules:{purchase_docs:[{required:!0,message:"请选择"}]},previewUrl:""}},components:{importDialog:c["default"]},methods:{upload(){this.$refs.importDialog.open()},async getFiles(){try{let e=await this.$API.common.file.docs.get();this.files=e.data.files}catch(e){}},loadPreview(){let e=this.form.purchase_docs.replace(/.docx$/,".png");this.previewUrl="/fileload?path=docs/preview&file="+e},imgerror(){this.previewUrl=""},refresh(){this.getFiles()},handleSuccess(){}},mounted(){this.getFiles()},beforeMount(){},created(){}},n=r(3744);const m=(0,n.Z)(p,[["render",d]]);var f=m}}]);